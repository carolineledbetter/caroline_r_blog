---
title: The Tidymodels Workflow
author: Caroline Ledbetter
date: '2019-12-27'
publishDate: '2020-01-31'
slug: tidymodels-suite-demo
categories:
  - R
tags:
  - tidyverse
  - tidymodels
lastmod: '2019-12-27T17:14:17-07:00'
description: ''
show_in_homepage: yes
show_description: ''
license: ''
featured_image: ''
featured_image_preview: ''
comment: yes
math: no
---



{{% tweet "1204918320346157056" %}}
<p>I have been trying to incorporate more of the <code>tidymodels</code> suite of packages
into my predictive models workflow (<code>rsample</code>, <code>recipes</code>) but I find myself
frequently falling back on <code>caret</code> for model tuning and fitting
because it’s what I know. This post is a work through from start to finish using
the <code>tidymodels</code> suite. This post is NOT a tutorial for supervised learning.
It assumes you know how and why to split your data, resample, up/down sample
tune parameters, evaluate models etc.
If you are looking for guides for machine learning, I highly recommend:<br />
:star:
<a href="https://alison.rbind.io/post/2019-12-23-learning-to-teach-machines-to-learn/">Learning to teach machines to learn:</a>
This post from Alison Hill is full of great resources.<br />
:closed_book:<a href="http://appliedpredictivemodeling.com">Applied Predictive Modeling</a>
by Max Kuhn and Kjell Johnson<br />
:closed_book:
<a href="https://www.springer.com/gp/book/9781461471370">Intro to Statisitcal Learning</a>
by Gareth James, Daniela Witten, Trevor Hastie and Robert Tibshirani<br />
:closed_book:
<a href="https://www.springer.com/gp/book/9780387848570">The Elements of Statistical Learning</a>
by Trevor Hastie, Robert Tibshirani and Jerome Friedman</p>
<p><strong>The Data</strong><br />
For this post I am going to use the
<a href="http://archive.ics.uci.edu/ml/datasets/Statlog+(German+Credit+Data)">German Credit data</a>
from the University of California Irving Machine Learning Repository. This
data set is included in the caret package, but the categorical variables are
dummy coded and I want to demonstrate some of the factor options in recipe, so
I am retrieving the original.</p>
<pre class="r"><code>library(tidymodels)
library(readr)
german_credit &lt;- 
  read_table2(&quot;http://archive.ics.uci.edu/ml/machine-learning-databases/statlog/german/german.data&quot;, 
              col_names = c(&quot;CheckingAccountStatus&quot;, 
                            &quot;Duration&quot;, 
                            &quot;CreditHistory&quot;, 
                            &quot;Purpose&quot;, 
                            &quot;Amount&quot;, 
                            &quot;SavingsAccountBonds&quot;, 
                            &quot;EmploymentDuration&quot;, 
                            &quot;InstallmentRatePercentage&quot;, 
                            &quot;Personal&quot;, 
                            &quot;OtherDebtorsGuarantors&quot;, 
                            &quot;ResidenceDuration&quot;, 
                            &quot;Property&quot;, 
                            &quot;Age&quot;, 
                            &quot;OtherInstallmentPlans&quot;, 
                            &quot;Housing&quot;, 
                            &quot;NumberExistingCredits&quot;, 
                            &quot;Job&quot;, 
                            &quot;NumberPeopleMaintenance&quot;, 
                            &quot;Telephone&quot;, 
                            &quot;ForeignWorker&quot;, 
                            &quot;Class&quot;))
glimpse(german_credit)</code></pre>
<pre><code>## Observations: 1,000
## Variables: 21
## $ CheckingAccountStatus     &lt;chr&gt; &quot;A11&quot;, &quot;A12&quot;, &quot;A14&quot;, &quot;A11&quot;, &quot;A11&quot;, &quot;A14&quot;, &quot;…
## $ Duration                  &lt;dbl&gt; 6, 48, 12, 42, 24, 36, 24, 36, 12, 30, 12, …
## $ CreditHistory             &lt;chr&gt; &quot;A34&quot;, &quot;A32&quot;, &quot;A34&quot;, &quot;A32&quot;, &quot;A33&quot;, &quot;A32&quot;, &quot;…
## $ Purpose                   &lt;chr&gt; &quot;A43&quot;, &quot;A43&quot;, &quot;A46&quot;, &quot;A42&quot;, &quot;A40&quot;, &quot;A46&quot;, &quot;…
## $ Amount                    &lt;dbl&gt; 1169, 5951, 2096, 7882, 4870, 9055, 2835, 6…
## $ SavingsAccountBonds       &lt;chr&gt; &quot;A65&quot;, &quot;A61&quot;, &quot;A61&quot;, &quot;A61&quot;, &quot;A61&quot;, &quot;A65&quot;, &quot;…
## $ EmploymentDuration        &lt;chr&gt; &quot;A75&quot;, &quot;A73&quot;, &quot;A74&quot;, &quot;A74&quot;, &quot;A73&quot;, &quot;A73&quot;, &quot;…
## $ InstallmentRatePercentage &lt;dbl&gt; 4, 2, 2, 2, 3, 2, 3, 2, 2, 4, 3, 3, 1, 4, 2…
## $ Personal                  &lt;chr&gt; &quot;A93&quot;, &quot;A92&quot;, &quot;A93&quot;, &quot;A93&quot;, &quot;A93&quot;, &quot;A93&quot;, &quot;…
## $ OtherDebtorsGuarantors    &lt;chr&gt; &quot;A101&quot;, &quot;A101&quot;, &quot;A101&quot;, &quot;A103&quot;, &quot;A101&quot;, &quot;A1…
## $ ResidenceDuration         &lt;dbl&gt; 4, 2, 3, 4, 4, 4, 4, 2, 4, 2, 1, 4, 1, 4, 4…
## $ Property                  &lt;chr&gt; &quot;A121&quot;, &quot;A121&quot;, &quot;A121&quot;, &quot;A122&quot;, &quot;A124&quot;, &quot;A1…
## $ Age                       &lt;dbl&gt; 67, 22, 49, 45, 53, 35, 53, 35, 61, 28, 25,…
## $ OtherInstallmentPlans     &lt;chr&gt; &quot;A143&quot;, &quot;A143&quot;, &quot;A143&quot;, &quot;A143&quot;, &quot;A143&quot;, &quot;A1…
## $ Housing                   &lt;chr&gt; &quot;A152&quot;, &quot;A152&quot;, &quot;A152&quot;, &quot;A153&quot;, &quot;A153&quot;, &quot;A1…
## $ NumberExistingCredits     &lt;dbl&gt; 2, 1, 1, 1, 2, 1, 1, 1, 1, 2, 1, 1, 1, 2, 1…
## $ Job                       &lt;chr&gt; &quot;A173&quot;, &quot;A173&quot;, &quot;A172&quot;, &quot;A173&quot;, &quot;A173&quot;, &quot;A1…
## $ NumberPeopleMaintenance   &lt;dbl&gt; 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ Telephone                 &lt;chr&gt; &quot;A192&quot;, &quot;A191&quot;, &quot;A191&quot;, &quot;A191&quot;, &quot;A191&quot;, &quot;A1…
## $ ForeignWorker             &lt;chr&gt; &quot;A201&quot;, &quot;A201&quot;, &quot;A201&quot;, &quot;A201&quot;, &quot;A201&quot;, &quot;A2…
## $ Class                     &lt;dbl&gt; 1, 2, 1, 1, 2, 1, 1, 1, 1, 2, 2, 2, 1, 2, 1…</code></pre>
